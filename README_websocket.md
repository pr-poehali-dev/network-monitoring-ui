# WebSocket –°–µ—Ä–≤–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

Python WebSocket —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–≥–ª—É—à–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ (WSS) - —Ç—Ä–µ–±—É–µ—Ç cert.pem –∏ cert.key –≤ –∫–æ—Ä–Ω–µ
python websocket_server.py

# –ò–ª–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (WSS –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
python run_server.py --host 0.0.0.0 --port 10009

# –ë–µ–∑ SSL (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
python run_server.py --host 0.0.0.0 --port 10009 --no-ssl
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≥–ª—É—à–µ–∫ –¥–∞–Ω–Ω—ã—Ö:**
- 100 —Å—Ç–∞–Ω—Ü–∏–π –∑–∞—Ä—è–¥–∫–∏
- 6 –≥–æ—Ä–æ–¥–æ–≤ –†–æ—Å—Å–∏–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
- –†–∞–Ω–¥–æ–º–Ω—ã–µ –≤–ª–∞–¥–µ–ª—å—Ü—ã, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å—Ç–∞—Ç—É—Å—ã
- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (—Å–µ—Å—Å–∏–∏, —ç–Ω–µ—Ä–≥–∏—è, –æ—à–∏–±–∫–∏)

‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ frontend:**
- `getStations` - —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `getStationById` - –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏  
- `getStationStats` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä `fields` –¥–ª—è –≤—ã–±–æ—Ä–æ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª–µ–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥–æ—Ä–æ–¥—É, –≤–ª–∞–¥–µ–ª—å—Ü—É, —Å—Ç–∞—Ç—É—Å—É
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

‚úÖ **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ —Å—Ç–∞–Ω—Ü–∏–π –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ—â–Ω–æ—Å—Ç–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è –∫–∞—Ä—Ç—ã
```json
{
  "type": "request",
  "action": "getStations", 
  "data": {
    "fields": ["id", "name", "city", "status", "coordinates", "owner"]
  },
  "requestId": "req_123"
}
```

### –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
```json
{
  "type": "request",
  "action": "getStations",
  "data": {
    "fields": ["id", "name", "city", "owner", "status", "totalEnergy", "currentPower"],
    "filters": {
      "city": "–ú–æ—Å–∫–≤–∞",
      "status": "active"
    },
    "pagination": {
      "page": 1,
      "limit": 20
    }
  },
  "requestId": "req_124"
}
```

### –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏
```json
{
  "type": "request", 
  "action": "getStationById",
  "data": {
    "stationId": "station_001"
  },
  "requestId": "req_125"
}
```

## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

```json
{
  "type": "response",
  "action": "getStations",
  "data": {
    "stations": [...],
    "total": 100,
    "page": 1, 
    "limit": 20
  },
  "requestId": "req_123"
}
```

## –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ì–æ—Ä–æ–¥–∞:** –ú–æ—Å–∫–≤–∞, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ö–∞–∑–∞–Ω—å, –ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥

**–í–ª–∞–¥–µ–ª—å—Ü—ã:** –†–æ—Å–≠–Ω–µ—Ä–≥–æ, –≠–ª–µ–∫—Ç—Ä–æ–°–µ—Ç—å, GreenCharge, PowerNet, EcoStation, ChargeMaster

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** ChargeApp, EcoDriver, PowerGO, ElectricWay, GreenRoute

**–°—Ç–∞—Ç—É—Å—ã:** active, inactive, maintenance, error, offline

## –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

```
2024-01-20 10:30:00 - INFO - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ 100 —Å—Ç–∞–Ω—Ü–∏–π
2024-01-20 10:30:01 - INFO - –ó–∞–ø—É—Å–∫ WebSocket —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ 0.0.0.0:10009
2024-01-20 10:30:01 - INFO - –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ ws://0.0.0.0:10009/ws
2024-01-20 10:30:05 - INFO - –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω. –í—Å–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤: 1
2024-01-20 10:30:06 - INFO - –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: getStations (ID: req_123)
2024-01-20 10:30:06 - INFO - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–µ–π: ['id', 'name', 'city', 'status', 'coordinates']
2024-01-20 10:30:06 - INFO - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º 50 —Å—Ç–∞–Ω—Ü–∏–π (—Å—Ç—Ä. 1, –ª–∏–º–∏—Ç 50)
2024-01-20 10:30:06 - INFO - –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ req_123
```

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ frontend

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ `src/services/websocket.ts` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL:

```typescript
// –î–ª—è WSS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
export const wsService = new WebSocketService('wss://78.138.143.58:10009/ws');

// –ò–ª–∏ –¥–ª—è WS (—Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
export const wsService = new WebSocketService('ws://78.138.143.58:10009/ws');
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è SSL

–î–ª—è —Ä–∞–±–æ—Ç—ã WSS —Ç—Ä–µ–±—É—é—Ç—Å—è —Ñ–∞–π–ª—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
- `cert.pem` - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- `cert.key` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á

–°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! üöÄ